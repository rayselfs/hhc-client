// ============================================
// Liquid Glass Shared Mixins
// Apple-style Liquid Glass Effect
// Now using CSS variables for theming support
// ============================================

// ------------------------------------------
// Glass Pill Shadow
// Soft, Apple-style inset glass shadow
// Used by: LiquidBtn, LiquidBtnToggle, LiquidSearchBar
// ------------------------------------------
@mixin liquid-glass-pill-shadow {
  box-shadow:
    // Soft border glow
    inset 0 0 0 0.5px rgba(var(--hhc-glass-border), var(--hhc-glass-glow-opacity)),
    // Top highlight (soft, diffused)
    inset 0 1px 3px 0 rgba(var(--hhc-glass-shine-top), var(--hhc-glass-shine-top-opacity)),
    // Bottom inner shadow
    inset 0 -1px 3px 0 rgba(var(--hhc-glass-shine-bottom), var(--hhc-glass-shine-bottom-opacity)),
    // Outer shadow (floating effect)
    0 2px 8px 0 rgba(var(--hhc-glass-shadow-color), var(--hhc-glass-shadow-opacity)),
    0 0 1px 0 rgba(var(--hhc-glass-shadow-color), var(--hhc-glass-shine-bottom-opacity));
}

// ------------------------------------------
// Glass Pill Shadow (Hover)
// Enhanced shadow for hover state
// ------------------------------------------
@mixin liquid-glass-pill-shadow-hover {
  box-shadow:
    // Soft border glow (brighter)
    inset 0 0 0 0.5px rgba(var(--hhc-glass-border), 0.5),
    // Top highlight (brighter)
    inset 0 1px 4px 0 rgba(var(--hhc-glass-shine-top), 0.3),
    // Bottom inner shadow
    inset 0 -1px 3px 0 rgba(var(--hhc-glass-shine-bottom), 0.1),
    // Outer shadow (more pronounced floating)
    0 4px 16px 0 rgba(var(--hhc-glass-shadow-color), 0.15),
    0 0 1px 0 rgba(var(--hhc-glass-shadow-color), 0.1);
}

// ------------------------------------------
// Glass Backdrop Filter
// Apple-style blur with higher saturation
// ------------------------------------------
@mixin liquid-glass-backdrop(
  $blur: var(--hhc-blur-xl, 12px),
  $saturate: var(--hhc-glass-saturate, 1)
) {
  backdrop-filter: blur($blur) saturate($saturate);
  -webkit-backdrop-filter: blur($blur) saturate($saturate);
}

// ------------------------------------------
// Glass Tint Background
// Neutral gray tint (Apple-style)
// ------------------------------------------
@mixin liquid-glass-tint($opacity: var(--hhc-glass-tint-opacity, 0.06)) {
  background-color: rgba(var(--hhc-glass-tint, 255, 255, 255), $opacity);
}

// ------------------------------------------
// Glass Tint Dark
// Darker tint for contrast (theme-aware)
// ------------------------------------------
@mixin liquid-glass-tint-dark($opacity: var(--hhc-glass-tint-dark-opacity, 0.08)) {
  background-color: rgba(var(--hhc-glass-tint-dark, 30, 30, 30), $opacity);
}

// ------------------------------------------
// Glass Text Color
// Themed text color with opacity
// ------------------------------------------
@mixin liquid-glass-text($opacity: var(--hhc-glass-text-opacity, 1)) {
  color: rgba(var(--hhc-glass-text, 0, 0, 0), $opacity);
}

// ------------------------------------------
// Glass Text Muted
// Secondary/muted text color
// ------------------------------------------
@mixin liquid-glass-text-muted {
  color: rgba(var(--hhc-glass-text-muted, 120, 120, 120), var(--hhc-glass-text-muted-opacity, 0.7));
}

// ------------------------------------------
// Glass Border
// Subtle border with glow effect
// ------------------------------------------
@mixin liquid-glass-border($opacity: var(--hhc-glass-border-opacity, 0.12)) {
  border: 1px solid rgba(var(--hhc-glass-border, 0, 0, 0), $opacity);
}

// ------------------------------------------
// Glass Layers Structure
// Common glass effect layer styles
// ------------------------------------------
@mixin liquid-glass-layers($prefix) {
  .#{$prefix}__glass-effect {
    position: absolute;
    inset: 0;
    z-index: 0;
    @include liquid-glass-backdrop;
  }

  .#{$prefix}__glass-tint {
    position: absolute;
    inset: 0;
    z-index: 1;
    @include liquid-glass-tint;
  }

  .#{$prefix}__glass-shine {
    position: absolute;
    inset: 0;
    z-index: 2;
    @include liquid-glass-pill-shadow;
  }
}

// ------------------------------------------
// Jelly Animation
// Squish effect for selection transitions
// ------------------------------------------
@mixin liquid-jelly-animation($duration: 0.4s) {
  animation: liquid-jelly $duration cubic-bezier(1, 0, 0.4, 1);
}

@keyframes liquid-jelly {
  0% {
    transform: scaleX(1);
  }
  50% {
    transform: scaleX(1.15);
  }
  100% {
    transform: scaleX(1);
  }
}

// ------------------------------------------
// Transition Helpers
// ------------------------------------------
@mixin liquid-transition($properties: all, $duration: var(--hhc-transition-normal, 300ms)) {
  transition: $properties $duration var(--hhc-transition-easing, cubic-bezier(0.4, 0, 0.2, 1));
}

@mixin liquid-transition-fast($properties: all) {
  transition: $properties var(--hhc-transition-fast, 150ms)
    var(--hhc-transition-easing, cubic-bezier(0.4, 0, 0.2, 1));
}

@mixin liquid-transition-slow($properties: all) {
  transition: $properties var(--hhc-transition-slow, 500ms)
    var(--hhc-transition-easing, cubic-bezier(0.4, 0, 0.2, 1));
}

// ------------------------------------------
// Disabled State
// Common disabled styling
// ------------------------------------------
@mixin liquid-disabled {
  opacity: var(--hhc-glass-text-disabled-opacity, 0.4);
  cursor: not-allowed;
  pointer-events: none;
}
